{% extends "base.html" %}

{% block title %}Set New Password - PoshPearl{% endblock %}

{% block content %}
<section class="pp-section">
    <div class="container" style="max-width: 450px;">
        <div class="pp-card">
            <div class="pp-card__header" style="text-align: center;">
                <h1>Set New Password</h1>
                <p style="color: var(--color-text-secondary); margin: 0.5rem 0 0;">Enter your new password below</p>
            </div>
            <div class="pp-card__body">
                {% if validlink %}
                <form method="post">
                    {% csrf_token %}
                    <div style="margin-bottom: 1rem;">
                        <label for="{{ form.new_password1.id_for_label }}"
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600;">New Password</label>
                        <input type="password" name="{{ form.new_password1.name }}"
                            id="{{ form.new_password1.id_for_label }}" required
                            style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-border); border-radius: 0.375rem; font-size: 1rem;">
                        {% if form.new_password1.errors %}
                        <p style="color: var(--color-error, #c00); font-size: 0.875rem; margin-top: 0.5rem;">{{
                            form.new_password1.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label for="{{ form.new_password2.id_for_label }}"
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Confirm New
                            Password</label>
                        <input type="password" name="{{ form.new_password2.name }}"
                            id="{{ form.new_password2.id_for_label }}" required
                            style="width: 100%; padding: 0.75rem; border: 1px solid var(--color-border); border-radius: 0.375rem; font-size: 1rem;">
                        {% if form.new_password2.errors %}
                        <p style="color: var(--color-error, #c00); font-size: 0.875rem; margin-top: 0.5rem;">{{
                            form.new_password2.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <button type="submit" class="pp-btn primary"
                        style="width: 100%; padding: 0.875rem; font-size: 1rem;">
                        <i class="fa-solid fa-check"></i> Set Password
                    </button>
                </form>
                {% else %}
                <div style="text-align: center; padding: 2rem 0;">
                    <i class="fa-solid fa-triangle-exclamation"
                        style="font-size: 3rem; color: var(--color-warning, #ffc107); margin-bottom: 1rem;"></i>
                    <h2>Invalid or Expired Link</h2>
                    <p style="color: var(--color-text-secondary); margin: 1rem 0 2rem;">
                        This password reset link is invalid or has expired. Please request a new one.
                    </p>
                    <a href="{% url 'password_reset' %}" class="pp-btn primary">Request New Link</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}